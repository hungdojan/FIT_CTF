version: '3.8'

name: {{ project.name }}_{{ user.username}}

services:
  login:
    build: ./user
    networks:
      - main_net
    ports:
      - "{{ user_config.ssh_port }}:22"
    volumes:
      - {{ project.config_root_dir }}/{{ project.volume_mount_dirname }}/{{ user.username }}:/home/user:z
      - {{ user.shadow_path }}:/etc/shadow:z

networks:
  main_net:
  private_net:
